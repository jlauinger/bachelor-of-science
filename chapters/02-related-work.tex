%% ---------------------------------------------------------------------------------------------------------------------

\chapter{Related Work}\label{ch:relatedwork}

\glsresetall % Resets all acronyms to not used


This is currently a list of notes on papers and books I read, both for summarizing and working on this section in the future.


%% ---------------------------------------------------------------------------------------------------------------------

\section{perahia2013}

Next Generation Wireless LANs \cite{perahia2013}: Comprehensive overview on the IEEE 802.11 standards, such as a, b, g, n, and ac PHYs and MAC.\\

\textbf{Interesting chapters:}

\begin{itemize}
	\item Chapter 1.1 Overview
	\item Chapter 4.1 Packet structure
	\item Chapter 8.4 Data/ACK frame exchange
	\item Chapter 8.5 Hidden node problem
	\item Chapter 12.1 Frame format
\end{itemize}

802.11 inherits 802 reference structure, such as 6 byte device addresses. 802.11 PHY is the physical layer, 802.11 medium access control (MAC) and 802.2 logical link control (LLC) form the data link layer. MAC uses carrier sense multiple access (CSMA): before transmitting a station listens to the medium. Ethernet uses CSMA/CD (collision detection), whereas 802.11 uses CSMA/CA (collision avoidance). Collision detection through lack of acknowledgements.\\

\textbf{PHYs (overview in \cite{perahia2013} table 1.2):}

\begin{itemize}
	\item IR
	\item 2.4 GHz frequency hopped spread spectrum (FHSS)
	\item 2.4 GHz direct sequence spread spectrum (DSSS)
	\item 802.11b: 2.4 GHz DSSS with complementary code keying (CCK), 11 Mbps
	\item 802.11a: 5 GHz OFDM, 54 Mbps
	\item 802.11g: 2.4 GHz OFDM, 54 Mbps
	\item 802.11n: 5 GHz, 300 Mbps (20 MHz channels), 600 Mbps (40 MHz channels)
	\item 802.11ac: 5 GHz, 1733 Mbps (80 MHz channels, 4 streams), 6933 Mbps (160 MHz channels, 8 streams)
\end{itemize}

Stations within a certain coverage area form a basic service set (BSS). Independent (ad-hoc) or infrastructure (AP). Infrastructure BSSs can be inter-connected as a distribution system (DS). Such a system is called extended service set (ESS). Often Ethernet is used for DS, so that wireless stations can directly address wired PCs in the LAN.

A spatial stream is an independent data stream transmitted or received by an antenna. A device need to have at least as many antennas as spatial streams.\\

\textbf{802.11a PHY packet structure:} see \cite{perahia2013} figure 4.1. STF-LTF-SIG-SRV-Data-Padding. The Short Training Field (STF) is used for start-of-packet detection and automatic gain control (AGC). The Long Training Field (LGF) is used for channel estimation, more precise frequency offset estimation, and time synchronization. The Signal Field (SIG) contains the rate and length information of the packet (BPSK / 64-QAM, $\frac{1}{2}$ / $\frac{3}{4}$ encoding). The Data Field consists of 16 bits Service Field (SRV) and the payload.

STF: 8 $\mu$s, 10 repetitions of a 0.8 $\mu$s symbol. Frequency Domain symbol using 12 of 64 subcarriers. 20 Msample/s yield 2.3 $\mu$s signal which repeats 4 times. This is repeated 2.5 times. Chosen to have good correlation properties and a low peak-to-average power, meaning its properties are preserved after clipping.

LTF: 8 $\mu$s, 2 3.2 $\mu$s training symbols and 1.6 $\mu$s cyclic prefix, 52 subcarriers populated with either 1 or -1, DC unused. Longer symbols mean more precise frequency offset estimation by correlating the two training symbols. Channel estimation after FFT using the basic communication systems equation.

SIG: 24 information bits (4 rate, 1 reserved, 12 length, 1 parity, 6 tail). BPSK and rate $\frac{1}{2}$ binary convolution code (BCC). Nearby stations also decode the SIG to infer correct deferring of transmissions. 4 $\mu$s, 1 64 standard OFDM symbol and cyclic prefix, 52 subcarriers used, 4 pilot. Tail bits are set to 0, used to flush the encoder and decoder.

Data: 16 bit service field, data bits, 6 tail bits (zero), padding. Stream of standard 4 $\mu$s symbols, 52 subcarrier, 4 of which are pilots.

Service: 7 bit scrambler initialization sequence. Used to synchronize descrambler, initially 0. After that: 9 reserved bits set to 0.

Scrambler: in 802.11a it is a length-127 frame synchronous scrambler derived by the polynomial $G(D)=D^7+D^4+1$. Sequence repeatedly generated: 00001110 11110010 11001001 00000010 00100110 00101110 10110110 00001100 11010100 11100111 10110100 00101010 11111010 01010001 10111000 1111111. When transmitting, the initial scrambler state is set to a pseudo-random non-zero state for each packet.Â´

The data field is encoded with the following process: bit stream => prepend service bits, append tail and pad bits => scramble => convolutional encoding => grouping into symbols => interleaving => modulator => insert pilots => IFFT => prepend CP => pulse shaping filter => DAC => upmixing => amplification => antenna.

Receiving of the data field: remove guard interval (GI) => FFT => channel equalization => phase rotation correction using pilot carriers => demodulation => deinterleaving => descrambling using first 7 bits of service field as initial state.

In high throughput operations, the preamble consists of a legacy preamble which is compatible to 802.11a (STF, LTF, SIG). After that there is a HT preamble which consists of HT-SIG1, HT-SIG2, HT-STF, HT-STF-1, ... HT-STF-N.\\

\textbf{Medium access control:}

Service Data Unit (SDU): chunk of data handled on a particular OSI layer in service to the layer directly above, e.g. MSDU or PSDU. Beacon frames transmitted by AP in regular time intervals to allow clients to discover a service set.

Distributed coordination function (DCF) (see also \cite{bianchi2000}): sensing the medium idle for a DIFS (DCF inter-frame space). While a station has access to the medium, it separates frames by a SIFS (short inter-frame space), but other stations will not capture the medium because they must wait for a DIFS which is longer. Virtual carrier sense mechanism is called NAV (network allocation vector). Frames may be prepended by a RTS/CTS handshake sequence to minimize effects of collisions. The SIFS is comprised of the PHY Rx latency, MAC processing, and PHY Tx latency. It's 16 $\mu$s. Slot time is 9 $\mu$s. The DIFS is a SIFS and 2 slots long.

After the medium becoming idle, a station must wait a random backoff time before transmitting. This is to reduce collisions caused by multiple waiting stations transmitting. The backoff time is pseudo-randomly chosen out of the [0..CW] interval where CW is the so-called contention window (CW). On each unsuccessful transmit, CW is doubled, yielding exponential growth. After a successful transmission CW is reset.

802.11 MAC employs positive frame acknowledgements by layer 2 ACKs. Without an ACK the sender retransmits the frame. Large MSDUs are fragmented into multiple PSDUs (individually acked) to reduce collision impact. To detect duplicate frames, the data frame includes a retry bit a sequence number field.

Hidden node problem: occurs when a station sees the AP but not a third station that is currently transmitting to the AP. The medium is busy, but the first station senses idle and begins a transmission. Therefore, the transmission to the AP collides. This is mitigated using RTS/CTS and the NAV, since the third station will receive the AP's CTS frame (although it can't hear the RTS) and updates its NAV to reflect the medium being busy for the length of the frame.\\

\textbf{MAC frame format:}

A MAC frame has a MAC header, a variable-length body, and a frame check sequence (FCS) containing a CRC. The MAC header consists of 2 byte Frame Control, 2 byte Duration/ID, 18 bytes Address 1, 2, and 3, 2 bytes Sequence Control, 6 bytes Address 4, 2 bytes QoS Control, and 4 bytes HT control. Most of the time the address fields contain the receive address (RA), transmit address (TA), and the BSSID. The Frame Control part consists of 2 bits protocol version, 2 bits type and 4 bits subtype, and various flags. See \cite{perahia2013} figure 12.2.

The type and subtype fields indicate the frame type, e.g. RTS, CTS, Data, or Beacon. The Sequence Control field is used for retransmission as described above. CTS and ACK frames do not carry a transmitter address, as they are merely sent in direct response to a previous frame.


%% ---------------------------------------------------------------------------------------------------------------------

\section{bianchi2000}

Performance Analysis of the IEEE 802.11 Distributed Coordination Function \cite{bianchi2000}.\\

\textbf{Distribution Coordination Function:}

Random access scheme for 802.11 MAC, based on CSMA/CA with retransmission scheduling based on binary exponential backoff rules. Positive acknowledgement of transmission using ACK frames. RTC/CTS: send short frame prior to data transmission, blocking the channel. Therefore if a collision occurs, a smaller amount of time is wasted.

Point Coordination Function: alternative mode of operation, the AP controls who can transmit. Not commonly used.

Problem of hidden terminals: some pairs of stations can not hear each other, therefore they can not always sense a busy medium.

A station transmits after the medium is sensed idle for a distributed inter-frame space (DIFS). If it is sensed busy, the station waits until a DIFS idle. Before transmitting, the station then also waits for a random backoff time to allow other stations to kick in. The backoff time is measured in slots, where one slot is the time needed to detect another transmit (Rx Tx turnaround time, MAC processing).

The backoff time is chosen out of the interval (0, w-1) where w is the contention window. Starting at CW\_MIN, w is doubled on each unsuccessful transmission, until CW\_MAX. Upon successful transmission, w is reset. When the medium is detected busy, w is frozen. ACKs are transmitted after a short inter-frame space (SIFS).\\

\textbf{Saturation Throughput / Performace:}

Maximum load that the system can carry in stable conditions. Can be used for a long time, unlike the Maximum Throughput which tends to lead to rapid performance decrease.

\cite{bianchi2000} develops a Markov model to derive throughput estimations and verifies them against simulations. The paper contains a lot of figures and tables with the results, but these are not really relevant for me.


%% ---------------------------------------------------------------------------------------------------------------------

\section{gollakota2008}

ZigZag Decoding: Combating Hidden Terminals in Wireless Networks \cite{gollakota2008}.\\

When CSMA fails, such as with hidden terminals, the 802.11 MAC fails: sender repeatedly collide, or one captures the medium. RTS/CTS is not used as a counter measure due to its negative effects on throughput. Observations: senders tend to collide again on the exact same packets, and due to jittering collisions start with a random stretch of interval. With ZigZag, a station finds a part of the packet that is collision-free in one instance, and subtracts that from the collision in the second instance, hence decoding a bit. This bit can then again be subtracted from the first collision, and so on.

With ZigZag, senders do not need to make a trade-off between resilience to collisions and throughput, instead they transmit at the saturation rate. Without a collisions, demodulating packets is unchanged with ZigZag. In the presence of a collision ZigZag achieves an information rate of R, which in theory is the maximum rate possible. ZigZag is modulation-independent, backwards-compatible, and generalizable to a collision with more than two packets.

Unlike Successive Interference Cancellation (SIC), ZigZag works when the channel uses a data rate close to the maximum possible at the given SNR.

If two senders collide, their signals are added up. Problems with standard-decoding of received symbols: Frequence offset and phase tracking (estimate delta f and compensate), Sampling offset (sender and receiver cannot sample the interpolated continuous signal at the exact same sampling points), Inter-symbol interference (ISI, linear equalizer to mitigate effects of neighboring symbols). ZigTag receiver kicks in after receiving a packet failed (wroon checksum).  It will then look for a second packet to check whether there was a collision.

Detecting a packet start is done by correlating the signal with the known 802.11 preamble. Correlation is done on a shifting starting sample, such that the highest correlation value will indicate the sample at which the preamble starts. Correlation is almost zero except when the preamble is perfectly aligned because the preamble sequence is stochastically independent from itself. Two spikes indicate a collision and also show the delta in starting time. The AP maintains coarse estimates of frequency offset for each client.

The AP stores the latest unmatched collisions to map them to possible future collision after retransmission. Collisions are aligned to the point where the second packet starts, and correlated to the stored data. If the packet is the same, correlation will spike.

AP takes the first interference-free chunk of the packet, decodes it, re-encodes the symbol generating an image of the chunk, and subtracts that from the collision, thus deriving another interference-free chunk of the other packet. This process is repeated iteratively until all chunks are decoded.

Compute the ZigZag system parameters using correlation, and inverse filters. Decoding errors propagate until the wrong symbol is by chance right. With BPSK, this has probability $\frac{1}{3}$, meaning errors die exponentially fast. Higher modulation schemes are more affected by errors. Better resilience by applying ZigZag forwards and backwards, picking the decoded symbol with higher confidence.

AP can decode collision packets fast enough to send ACK frame, inserts random padding transmission to prevent hidden terminal from sending while a third station is still transmitting. ZigZag can also decode collision involving any number of senders.
