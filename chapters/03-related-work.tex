%% -----------------------------------------------------------------------------

\chapter{Related Work}\label{ch:relatedwork}
\glsresetall % Resets all acronyms to not used

In this chapter I present related research and relevant previous work. The proposed technique of recognizing senders in a collision by correlating their \gls{MAC} addresses in the time-domain has not been described in the literature yet. However, there have been experiments that point in this direction. This chapter is organized in sections dealing with the coordination function, hidden terminals, collision handling, and consequences of the capture effect.


%% -----------------------------------------------------------------------------

\section{Distributed Coordination Function}\label{sec:related-dcf}

As described in section \ref{sec:dcf}, the \gls{DCF} defines the rules of communication in an IEEE 802.11 network. There are measures to reduce the impact of a collision, such as the two-way handshake using \gls{RTS} and \gls{CTS} frames. This procedure allows stations in the network to request transmission for a specific time. Other stations can overhear this \gls{RTS} and update their \gls{NAV} tables accordingly. If a collision occurs, it will do so on the \gls{RTS} frame. Since this is much shorter than a data frame, the amount of unusable air-time is smaller, as less data has to be discarded.

Giuseppe Bianchi contributed a performance analysis of the \gls{DCF} \cite{bianchi2000}. The maximum load that the system can carry in stable conditions is called saturation throughput. The author develops a Markov model to derive throughput estimations and verifies them against simulations. A result is that using the two-way handshake is not useful in practice, as throughput did not increase in experiments comparable to a  typical wireless application. Therefore, \gls{RTS} and \gls{CTS} frames are not used in most network configurations nowadays \cite{bianchi2000, gollakota2008, choi2013}.\\

ReCoder \cite{meng2015} is a new algorithm for neighbor discovery in 802.11 networks that does not use beacon frames. Instead, a new frame format that only needs to be correlated, not decoded, is introduced. The technique saves energy and is more resilient to situations, such as collisions, where decoding the packet is not possible.

The alternative frames start with a fixed, independent training sequence called RCover. This sequence is used to identify a neighbor discovery message, similar to frame detection using the Short Training Field. After that, a two-stage identification pattern is applied. The first stage is a fixed Gold-code signal with low auto-correlation, shifted by a unique amount of samples randomly chosen by the sending station. In the event that two stations choose the same offset, they are distinguished by the second stage, which a hash of the \gls{MAC} address. This stage is not as distinguishable and therefore only acts as tie-beaker for identical first stages.\\

Receivers are triggered by the RCover sequence and correlate the first identity stage to the list of known stations. If a match is found, the second stage is checked to eliminate possible duplicate shift-amounts. If however no match could be found, the reference table is adjusted so that the new identity is now included.\\

As Zhu et al. pointed out, real-world packet loss can be caused by both a weak link or collisions, and these conditions can switch very fast \cite{zhu2016}. Reasons for this include humans in the signal path, external interference, and unpredictable transmissions by other stations. Thus, failure classification must be done at the frame level to provide useful information. Both naive assumptions of only collisions, or weak links, cause a waste of resources, i.e. air-time or transmission power.

The authors present a new algorithm, \gls{PLFC} which collects a byte-level \gls{RSSI} and a packet-level \gls{LQI}. Using this information, the receiver provides the sender with an elaborated retransmission request. This includes whether there was a weak link or a collision. The sender can then for example increase transmission power to mitigate a weak link, or just retransmit if a collision occurred \cite{zhu2016}.\\

For continuous and fairly regular data streams from multiple clients, such as in an environment with several VoIP transmissions, the 802.11 \gls{MAC} exponential backoff can lead to some clients experiencing lower throughput \cite{lin2009}. Lin et al. presented Lock Step, an algorithm introducing pro-active backoff times after successful transmissions. This allows other clients to step in and transmit their data. With Lock Step, clients extend the carrier sense mechanism by measuring the fraction of free air-time within 8 continuous slots, and adjusting their transmission behavior based on that fraction. After some collisions have occurred, all clients will eventually be transmitting one eighth of the time, thus providing a fairer distribution to all stations in the network.\\

While the ReCoder algorithm provides sender detection, it requires a change to the standard IEEE 802.11 \gls{MAC} layer, adding new frame types. This is a shared trait with \gls{PLFC} and Lock Step. Therefore, the technique must be implemented in all devices in order to benefit from it. This is often hard to do, or may even be impossible. This thesis tries to detect senders in a collision without any changes to the \gls{MAC} layer and is therefore different.

Similar to a possible usage scenario of this thesis, previous work has suggested assigning a priority list for retransmissions after a collision. \gls{CSMA/CR} \cite{choi2013} grants one station priority access to retransmit, so that there won't be a follow-up collision. \cite{zhao2015} proposed an algorithm that allows the receiver to reschedule all collided packets. Each sender picks a random sequence of samples. If a collision is detected by the receiver, it broadcasts a request for these sequences. It then decodes those in parallel using cross-correlation and broadcasts a scheduling packet to all identified senders at once. The senders are assigned a slot and can then resend their packet in a well-defined queue, not wasting air-time by unused slots, as would occur with the binary backoff algorithm of \gls{CSMA/CA}. Parallelism is possible by choosing sample sequences with low self-correlation properties.


%% -----------------------------------------------------------------------------

\section{Hidden Terminals}

Hidden Terminals are situations where the \gls{CSMA/CA} employed by the IEEE 802.11 \gls{MAC} layer can not correctly detect an ongoing transmission. This can happen when a receiver is in range of two stations, but these stations can not reach each other \cite{perahia2013}.

In this case, it is possible that one sender does not recognize a transmission of the other sender. It therefore begins sending and disturbs communications between the other sender and the receiver. This effectively renders both transmissions lost as the frames can not be decoded any more by the receiver.\\

\gls{CSMA/CA} is often over-protective, meaning there is some air-time which is not used for transmissions. This is due to the fact that carrier sensing is done by the sender. A better approach could be looking at current conditions at the receiver side \cite{halperin2007}, since those determine whether or not the receiver will be able to decode the frame. If two stations are hidden from each other, even multiple transmissions could be conducted at the same time for the right sender and receiver pairs, providing improved spatial efficiency.\\

A different approach is using full-duplex transmissions to continuously provide feedback whether the receiver is able to decode the frame. Such a technique is proposed by Vermeulen et al. \cite{vermeulen2016}. While receiving a frame, a station keeps transmitting acknowledgments. If at some point a collision occurs, the receiver stops sending this acknowledgment. The sender detects this and cancels the transmission. The simultaneous acknowledgment frame thus acts like a continuous CTS frame, letting other stations know of the transmission and partially solving the hidden node problem. Other research has even concluded that full-duplex communication is to some extent possible. The authors call their approach \gls{AFD} \cite{lv2014}.


%% -----------------------------------------------------------------------------

\section{Collision Detection and Decoding}

When \gls{CSMA/CA} fails, such as with hidden terminals, it is possible that senders repeatedly collide, or one completely captures the medium. The \gls{RTS} / \gls{CTS} handshake mechanism is commonly not used as a counter measure due to its negative effects on throughput \cite{bianchi2000, gollakota2008, choi2013}. Gollakota et al. observed that senders tend to collide again on the exact same packets, and due to jitter collisions start with a random interval of delay. The authors proposed a new technique called ZigZag. With ZigZag, a station finds a part of the collided frame that is collision-free in one instance, and subtracts that from the collision in a second instance. This allows the receiver to decode a small part of the frame. This bit can then again be subtracted from the first collision, yielding more decoded parts. After a number of repetitions, the entire frame is decoded.

Using ZigZag, senders do not need to make a trade-off between resilience to collisions and throughput, instead they transmit at the network's saturation rate. When no collisions occur, the frame demodulating process remains unchanged. However, in the presence of a collision ZigZag manages to decode it and therefore maintains a high information rate in the network. ZigZag is independent from the used \gls{MCS}, backwards-compatible to the standard IEEE 802.11 \gls{MAC} layer, and even generalizable to a collision with more than two packets.\\

Detecting the start of frames in the collision is done by correlating the signal with the known 802.11 preamble. This correlation is done on a shifting start sample, such that the highest correlation value will indicate the sample at which the preamble starts. Correlation is almost zero except when the preamble is perfectly aligned because the preamble sequence is stochastically independent from itself \cite{ieee2012}. More than one spike in the correlation shows the presence of a collision, and also allows the receiver to detect the offset between the collided frames. I will use the same technique to detect collision within the proof-of-concept implementation for this thesis.\\

Stripping decoder (Strider) \cite{gudipati2011} is a rate-less code that can be used in the IEEE 802.11 \gls{MAC}. Strider strives to be collision-resilient, meaning that senders do not need to care for collision as receivers will be able to decode packets even after suffering from a collision. For this, a minimum distance transformation (MDT) is used \cite{gudipati2011}. Modulated symbols are mapped to a larger symbol space, such as the minimum distance between symbols is larger than the required one to be able to decode signals. Hence, Strider automatically achieves the best code rate for a given channel.

AutoMAC \cite{gudipati2012} is such a modified \gls{MAC} layer. It uses the Strider code, although other rate-less codes would be possible, and embraces collisions, as the lack of needing to avoid them allows for simpler \gls{MAC} implementations. A similar change to the \gls{MAC} layer is proposed by Mozart \cite{bansal2013}, which also encourages collisions and queues retransmissions in an intelligent way so that the receiver will then be able to decode all frames.

When compared to this thesis, this work is interesting, but not directly applicable. Strider would probably allow to decode colliding \gls{MAC} addresses, but only if the senders are a-priori using the code. This thesis tries to achieve the goal without requiring any changes to the standard \gls{MAC} layer.\\

A different scenario where collisions can happen is broadcast frames that get relayed by intermediate stations. Decoding  such broadcast collisions would provide much better throughput. However, previously described collision recovery techniques can not be used here. ZigZag \cite{gollakota2008}, for example, requires that frames must be retransmitted at least once, which is not the case with non-acknowledged, only relayed, broadcast transmissions. \gls{SIC} \cite{patel1994} demands that one packet is known to the receiver, which is also not possible here.

Onion Decoding \cite{wang2010} uses an iterative approach  comparable to ZigZag, where collisions are detected by correlating the preambles, the onion decoder needs an offset between the colliding frames, and the first (collision-free) chunk is subtracted from the collision to obtain a new collision-free chunk. However, Onion Decoding does not need a second collision of the same frame, because it is specifically designed for broadcast collisions, where multiple stations are forwarding the broadcast packet. Hence, both packets in the collision are the same.

Very similar to Onion Decoding is Chorus \cite{zhang2010}, which also uses iterative subtractions to decode collisions of the same frame.\\

\gls{ACR} \cite{wu2010} tries to make collisions occur in a so-called Long Short (LS) form, meaning a long frame is colliding with a short frame. This comes with some advantages. For example. receivers can still decode many chunks from the long frame, and \gls{ACR} can then employ \gls{FEC} to decode the entire frame. Collisions are detected by calculating a \gls{CRC} and assuming a collision on failure.

On the \gls{MAC} layer, payload data from the network layer is actively shaped in long and short frames which are passed to the \gls{PHY} for transmission. The \gls{MAC} layer decides randomly whether to first send the short or long frame. Furthermore, the \gls{CSMA} algorithm is modified to increase the likelihood of LS collisions. This is achieved by a non-uniform distribution of contention slots and a transmission delay for short packets \cite{wu2010}.\\

Keene et al. \cite{keene2010} presented an algorithm to locate the part of a frame that is not decodable due to a collision. The algorithm uses a likelihood ratio test to determine whether a symbol suffered from an error and then determines the frame chunk having the most errors using a sliding window approach. In some cases, the packet can be fully decoded by correcting the bit errors using an error resolving code.


%% -----------------------------------------------------------------------------

\section{Capture Effect}\label{sec:related-capture}

The capture effect describes a situation where due to differences in signal power, a receiver's antenna physically adjusts to one specific transmission, while filtering out other incoming signals \cite{kim1999}. In the case of a collision, this means that the signals do not simply add up together, but it is possible that one transmission is received, while the the other one is barely noticed.\\

Park et al. suggested a mechanism to detect when a frame with high power interrupts an ongoing reception of a frame with lower power. This is then counted as a collision. The amount of such collisions is shared using a new frame type, informing neighboring stations about the situation. These stations then calculate the sum of nearby collisions and adjust the code rate to use \cite{park2009}.\\

Similar to \cite{zhu2016}, \cite{chua2016} tries to decide whether a packet failure was due to a collision or weak link by examining the power level at the receiver. The authors observe that when a collision occurs, the power level is not simply the sum of the two transmissions, but rather includes some form of jitter due to oscillations in automatic gain control and other hardware with feedback loops.\\

\cite{jibukumar2015} proposed a protocol called Receiver-Initiated Fast Sequential Collision Resolution (RFSR). It is somewhat similar to CSMA/CR \cite{choi2013} in that when a station detects a collision, it sends out a jamming signal to inform all transmitters that they need to stop transmitting. After a collision, the collided frame is assigned priority access for retransmission.\\

As described in section \ref{sec:related-dcf}, these techniques have the disadvantage of requiring a change to the standard IEEE 802.11 \gls{MAC} layer. In contrast, this thesis tries to recognize colliding senders exclusively by changes to receiver implementations, not the coordination function itself.
